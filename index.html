<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în T·∫≠p - B√°nh M√¨ Pita ·∫©n danh</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --pita-warm: #e67e22;
            --pita-light: #fdf2e9;
            --pita-dark: #d35400;
            --bg: #fdfaf6;
        }

        * { box-sizing: border-box; font-family: 'Quicksand', sans-serif; }
        body { 
            background: var(--bg); margin: 0; min-height: 100vh;
            display: flex; justify-content: center; align-items: center; padding: 15px;
        }

        .container {
            width: 100%; max-width: 750px; background: white;
            padding: 40px; border-radius: 25px;
            box-shadow: 0 15px 35px rgba(230, 126, 34, 0.15);
            border: 2px solid var(--pita-light);
            position: relative; overflow: hidden;
        }

        h1 { text-align: center; color: var(--pita-dark); font-size: 28px; margin-bottom: 5px; }
        .subtitle { text-align: center; color: #7f8c8d; margin-bottom: 25px; font-style: italic; }

        /* M√†n h√¨nh kh·ªüi ƒë·∫ßu & Kh·∫£o s√°t */
        .screen { display: none; animation: slideIn 0.5s ease; }
        .active { display: block; }

        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .input-box { width: 100%; padding: 15px; border: 2px solid #eee; border-radius: 12px; font-size: 16px; margin-bottom: 15px; outline: none; transition: 0.3s; }
        .input-box:focus { border-color: var(--pita-warm); }

        .btn {
            width: 100%; padding: 15px; border: none; border-radius: 12px;
            font-size: 17px; font-weight: 700; cursor: pointer;
            background: var(--pita-warm); color: white; transition: 0.3s; margin-top: 10px;
        }
        .btn:hover { background: var(--pita-dark); transform: scale(1.02); }

        .bread-question { text-align: center; background: var(--pita-light); padding: 20px; border-radius: 15px; margin-bottom: 20px; }
        .choice-btns { display: flex; gap: 10px; margin-top: 15px; }
        .btn-choice { flex: 1; padding: 12px; border: 2px solid var(--pita-warm); border-radius: 10px; cursor: pointer; background: white; color: var(--pita-warm); font-weight: 700; }
        .btn-choice.active { background: var(--pita-warm); color: white; }

        /* Music Player */
        #music-container { margin-bottom: 20px; display: none; }
        iframe { border-radius: 12px; width: 100%; height: 80px; border: none; }

        /* Quiz UI */
        .header-quiz { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .timer { color: var(--pita-dark); font-weight: 700; font-size: 18px; }
        .progress-bar { height: 10px; background: #eee; border-radius: 5px; margin-bottom: 25px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--pita-warm); width: 0%; transition: 0.4s; }

        .question-text { font-size: 19px; font-weight: 700; margin-bottom: 20px; color: #2c3e50; line-height: 1.5; }
        .options-list { display: grid; gap: 12px; }
        .option {
            padding: 16px; border: 2px solid #f0f0f0; border-radius: 12px;
            cursor: pointer; transition: 0.2s; font-weight: 500; background: #fafafa;
        }
        .option:hover { border-color: var(--pita-warm); background: #fffaf5; }
        .option.correct { background: #d4efdf; border-color: #27ae60; color: #1e8449; font-weight: 700; }
        .option.incorrect { background: #f9ebea; border-color: #e74c3c; color: #943126; }

        #result-msg { font-weight: 700; text-align: center; margin-top: 20px; font-size: 18px; }
    </style>
</head>
<body>

<div class="container">
    <h1>√îN T·∫¨P - B√ÅNH M√å PITA ·∫®N DANH</h1>
    <div class="subtitle">Thought Partner: L·ªõp 12 - 2025</div>

    <div id="screen-start" class="screen active">
        <label><b>T√™n c·ªßa b·∫°n l√† g√¨?</b></label>
        <input type="text" id="user-name" class="input-box" placeholder="Nh·∫≠p t√™n..." autocomplete="off">
        
        <label><b>URL Nh·∫°c YouTube (N·∫øu mu·ªën v·ª´a l√†m v·ª´a nghe):</b></label>
        <input type="text" id="music-url" class="input-box" placeholder="D√°n link YT v√†o ƒë√¢y (v√≠ d·ª•: https://www.youtube.com/watch?v=...)">

        <div class="bread-question">
            <b>B·∫°n c√≥ th√≠ch B√°nh M√¨ Pita (m·ªôt lo·∫°i b√°nh ·ªü Ai C·∫≠p) kh√¥ng?</b>
            <div class="choice-btns">
                <button class="btn-choice" onclick="setBreadChoice(true)" id="btn-yes">C√ì, R·∫§T TH√çCH!</button>
                <button class="btn-choice" onclick="setBreadChoice(false)" id="btn-no">KH√îNG...</button>
            </div>
        </div>
        
        <button class="btn" onclick="validateAndStart()">B·∫Øt ƒë·∫ßu h√†nh tr√¨nh</button>
    </div>

    <div id="screen-quiz" class="screen">
        <div id="music-container"></div>
        <div class="header-quiz">
            <div id="display-user" style="font-weight: 600;"></div>
            <div class="timer" id="timer">45:00</div>
        </div>
        <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
        
        <div id="quiz-content"></div>
        <div id="result-msg"></div>
        <button class="btn" id="next-btn" style="display:none;" onclick="nextQuestion()">Ti·∫øp t·ª•c th√¥i &rarr;</button>
    </div>

    <div id="screen-result" class="screen" style="text-align:center;">
        <h2 id="final-greeting"></h2>
        <div style="font-size: 50px; font-weight: 800; color: var(--pita-warm); margin: 20px 0;" id="final-score">0/59</div>
        <p id="bread-feedback" style="font-size: 18px; font-weight: 600;"></p>
        <button class="btn" onclick="location.reload()">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
    </div>
</div>

<script>
    // To√†n b·ªô d·ªØ li·ªáu 59 c√¢u h·ªèi d·ª±a tr√™n ngu·ªìn b·∫°n cung c·∫•p 
    const questionsData = [
        { q: "C√¢u 1. T·∫≠p ƒëo√†n P√¥n P·ªët ‚Äì I√™ng Xary ph√°t ƒë·ªông chi·∫øn tranh x√¢m l∆∞·ª£c Vi·ªát Nam v√†o ng√†y", options: ["30-4-1975", "30-4-1978", "30-4-1977", "30-4-1976"], a: 2 },
        { q: "C√¢u 2. Trong chi·∫øn tranh bi√™n gi·ªõi T√¢y Nam, ng√†y n√†o B·ªô Ch√≠nh tr·ªã quy·∫øt ƒë·ªãnh ph√°t ƒë·ªông ph·∫£n c√¥ng?", options: ["15-6-1976", "15-6-1977", "15-6-1978", "15-6-1979"], a: 2 },
        { q: "C√¢u 3. M·∫∑t tr·∫≠n ƒêo√†n k·∫øt d√¢n t·ªôc c·ª©u n∆∞·ªõc Cam-pu-chia th√†nh l·∫≠p v√†o ng√†y", options: ["02-12-1976", "02-12-1977", "02-12-1978", "02-12-1979"], a: 2 },
        { q: "C√¢u 4. P√¥n P·ªët m·ªü cu·ªôc ti·∫øn c√¥ng to√†n tuy·∫øn bi√™n gi·ªõi T√¢y Nam n∆∞·ªõc ta v√†o ng√†y", options: ["23-12-1975", "23-12-1976", "23-12-1977", "23-12-1978"], a: 3 },
        { q: "C√¢u 5. Th·ªß ƒë√¥ Phn√¥m P√™nh ho√†n to√†n ƒë∆∞·ª£c gi·∫£i ph√≥ng v√†o ng√†y", options: ["07-01-1976", "07-01-1977", "07-01-1978", "07-01-1979"], a: 3 },
        { q: "C√¢u 8. M·ªôt trong nh·ªØng n√©t ch√≠nh ngh·ªá thu·∫≠t qu√¢n s·ª± bi√™n gi·ªõi T√¢y Nam l√† ch·ªß ƒë·ªông ti·∫øn h√†nh", options: ["chi·∫øn tranh nh√¢n d√¢n", "chi·∫øn tranh nh√¢n d√¢n t·∫°i ch·ªó", "chi·∫øn tranh nh√¢n d√¢n t·∫°i ch·ªó r·ªông kh·∫Øp", "chi·∫øn tranh nh√¢n d√¢n t·∫°i ch·ªó ƒë·ªìng lo·∫°t"], a: 2 },
        { q: "C√¢u 10. Ch√≠nh quy·ªÅn Trung Qu·ªëc huy ƒë·ªông l·ª±c l∆∞·ª£ng l·ªõn ti·∫øn c√¥ng bi√™n gi·ªõi ph√≠a B·∫Øc Vi·ªát Nam v√†o ng√†y", options: ["17-02-1978", "17-3-1978", "17-02-1979", "17-3-1979"], a: 2 },
        { q: "C√¢u 11. Ch·ªß t·ªãch n∆∞·ªõc c√¥ng b·ªë L·ªánh T·ªïng ƒë·ªông vi√™n b·∫£o v·ªá T·ªï qu·ªëc v√†o ng√†y", options: ["05-01-1979", "05-02-1979", "05-3-1979", "05-4-1979"], a: 2 },
        { q: "C√¢u 13. Trung Qu·ªëc r√∫t qu√¢n ho√†n to√†n kh·ªèi n∆∞·ªõc ta v√†o ng√†y", options: ["15-3-1979", "16-3-1979", "17-3-1979", "18-3-1979"], a: 3 },
        { q: "C√¢u 17. Trung Qu·ªëc d√πng v≈© l·ª±c ƒë√°nh chi·∫øm nh√≥m ƒë·∫£o ph√≠a T√¢y qu·∫ßn ƒë·∫£o Ho√†ng Sa v√†o nƒÉm", options: ["1971", "1972", "1973", "1974"], a: 3 },
        { q: "C√¢u 18. Trung Qu·ªëc chi·∫øm ƒë√≥ng tr√°i ph√©p G·∫°c Ma, Xu Bi, Ch·ªØ Th·∫≠p... thu·ªôc Tr∆∞·ªùng Sa v√†o nƒÉm", options: ["1986", "1987", "1988", "1989"], a: 2 },
        { q: "C√¢u 19. H·ªá th·ªëng nh√† tr∆∞·ªùng qu√¢n ƒë·ªôi hi·ªán c√≥ bao nhi√™u h·ªçc vi·ªán v√† c√°c tr∆∞·ªùng sƒ© quan, ƒë·∫°i h·ªçc?", options: ["10 h·ªçc vi·ªán - 11 tr∆∞·ªùng sƒ© quan, ƒë·∫°i h·ªçc", "11 h·ªçc vi·ªán - 10 tr∆∞·ªùng sƒ© quan", "10 h·ªçc vi·ªán - 12 tr∆∞·ªùng sƒ© quan", "9 h·ªçc vi·ªán - 11 tr∆∞·ªùng sƒ© quan"], a: 0 },
        { q: "C√¢u 20. Tuy·ªÉn sinh Qu√¢n ƒë·ªôi, C√¥ng an y√™u c·∫ßu t·ªï ch·ª©c tuy·ªÉn sinh:", options: ["ƒê√∫ng ph√°p lu·∫≠t, d√¢n ch·ªß, c√¥ng khai, minh b·∫°ch, ch√≠nh x√°c, c√¥ng b·∫±ng", "ƒê√∫ng quy ch·∫ø, d√¢n ch·ªß, ch√≠nh x√°c", "ƒê√∫ng quy ƒë·ªãnh, c√¥ng t√¢m", "ƒê√∫ng h∆∞·ªõng d·∫´n, c√¥ng b·∫±ng"], a: 0 },
        { q: "C√¢u 21. ƒê√¢u l√† nghƒ©a v·ª• c·ªßa h·ªçc vi√™n tr∆∞·ªùng Qu√¢n ƒë·ªôi, C√¥ng an?", options: ["ƒê∆∞·ª£c ƒë·∫£m b·∫£o c∆° s·ªü v·∫≠t ch·∫•t", "ƒê∆∞·ª£c ngh·ªâ l·ªÖ T·∫øt", "S·∫µn s√†ng nh·∫≠n nhi·ªám v·ª• ph√¢n c√¥ng khi ra tr∆∞·ªùng", "ƒê∆∞·ª£c h∆∞·ªüng ch·∫ø ƒë·ªô khen th∆∞·ªüng"], a: 2 },
        { q: "C√¢u 22. C∆° s·ªü n√†o KH√îNG tuy·ªÉn h·ªçc sinh trung h·ªçc ph·ªï th√¥ng?", options: ["H·ªçc vi·ªán H·∫≠u c·∫ßn", "H·ªçc vi·ªán L·ª•c qu√¢n", "H·ªçc vi·ªán Bi√™n ph√≤ng", "H·ªçc vi·ªán Qu√¢n y"], a: 1 },
        { q: "C√¢u 23. H·∫° sƒ© quan, binh sƒ© t·∫°i ng≈© d·ª± tuy·ªÉn tr∆∞·ªùng Qu√¢n ƒë·ªôi ph·∫£i ph·ª•c v·ª• √≠t nh·∫•t:", options: ["6 th√°ng", "9 th√°ng", "12 th√°ng tr·ªü l√™n", "15 th√°ng"], a: 2 },
        { q: "C√¢u 24. Qu√¢n nh√¢n chuy√™n nghi·ªáp d·ª± tuy·ªÉn ph·∫£i c√≥ th·ªùi gian ph·ª•c v·ª• √≠t nh·∫•t:", options: ["6 th√°ng", "12 th√°ng tr·ªü l√™n", "18 th√°ng", "24 th√°ng"], a: 1 },
        { q: "C√¢u 25. Thanh ni√™n ngo√†i Qu√¢n ƒë·ªôi d·ª± tuy·ªÉn tr∆∞·ªùng Qu√¢n ƒë·ªôi ph·∫£i c√≥ ƒë·ªô tu·ªïi:", options: ["Kh√¥ng qu√° 21 tu·ªïi", "Kh√¥ng qu√° 20 tu·ªïi", "Kh√¥ng qu√° 22 tu·ªïi", "Kh√¥ng qu√° 23 tu·ªïi"], a: 0 },
        { q: "C√¢u 26. Qu√¢n nh√¢n t·∫°i ng≈©/xu·∫•t ng≈© d·ª± tuy·ªÉn tr∆∞·ªùng Qu√¢n ƒë·ªôi ph·∫£i c√≥ ƒë·ªô tu·ªïi:", options: ["Kh√¥ng qu√° 22 tu·ªïi", "Kh√¥ng qu√° 24 tu·ªïi", "Kh√¥ng qu√° 23 tu·ªïi", "Kh√¥ng qu√° 21 tu·ªïi"], a: 2 },
        { q: "C√¢u 27. Ph∆∞∆°ng th·ª©c n√†o KH√îNG √°p d·ª•ng ƒë·ªëi v·ªõi tuy·ªÉn sinh ƒë·∫°i h·ªçc Qu√¢n ƒë·ªôi?", options: ["X√©t tuy·ªÉn th·∫≥ng", "X√©t k·∫øt qu·∫£ thi ƒêGNL trong n∆∞·ªõc", "X√©t k·∫øt qu·∫£ thi ƒêGNL n∆∞·ªõc ngo√†i", "X√©t k·∫øt qu·∫£ thi ƒêGNL B·ªô Qu·ªëc ph√≤ng"], a: 2 },
        { q: "C√¢u 28. Th√≠ sinh d·ª± tuy·ªÉn sinh c√°c tr∆∞·ªùng Qu√¢n ƒë·ªôi:", options: ["ƒê·ªÅu ph·∫£i qua s∆° tuy·ªÉn", "Kh√¥ng c·∫ßn s∆° tuy·ªÉn n·∫øu h·ªçc gi·ªèi", "Mi·ªÖn s∆° tuy·ªÉn n·∫øu c√≥ ng∆∞·ªùi th√¢n l√† qu√¢n nh√¢n", "Mi·ªÖn s∆° tuy·ªÉn n·∫øu ƒë·∫°t gi·∫£i qu·ªëc gia"], a: 0 },
        { q: "C√¢u 29. Ng√†nh n√†o ƒë∆∞·ª£c ƒë√†o t·∫°o ·ªü H·ªçc vi·ªán An ninh nh√¢n d√¢n?", options: ["An ninh m·∫°ng v√† ph√≤ng ch·ªëng t·ªôi ph·∫°m c√¥ng ngh·ªá cao", "Trinh s√°t kƒ© thu·∫≠t", "Nghi·ªáp v·ª• c·∫£nh s√°t", "Kƒ© thu·∫≠t C√¥ng an nh√¢n d√¢n"], a: 0 },
        { q: "C√¢u 30. ƒê·ªëi t∆∞·ª£ng n√†o KH√îNG thu·ªôc di·ªán tuy·ªÉn m·ªõi ƒë·∫°i h·ªçc tr∆∞·ªùng C√¥ng an?", options: ["Ch·ªâ huy t·ª´ c·∫•p ƒë·ªôi tr·ªü l√™n", "H·ªçc sinh Tr∆∞·ªùng VƒÉn ho√°", "Chi·∫øn sƒ© nghƒ©a v·ª•", "C√¥ng d√¢n th∆∞·ªùng tr√∫"], a: 0 },
        { q: "C√¢u 31. Vi·ªác n√†o KH√îNG c√≥ trong n·ªôi dung s∆° tuy·ªÉn v√†o tr∆∞·ªùng C√¥ng an?", options: ["Ki·ªÉm tra h·ªçc b·∫°", "Th·∫©m tra ti√™u chu·∫©n ch√≠nh tr·ªã", "Ki·ªÉm tra s·ª©c kho·∫ª", "Ch·ª•p ·∫£nh b·ªë ƒë·∫ª v√† m·∫π ƒë·∫ª c·ªßa th√≠ sinh"], a: 3 },
        { q: "C√¢u 32. Ch·ª©c nƒÉng c·ªßa B·ªô Qu·ªëc ph√≤ng l√† tham m∆∞u v·ªõi ƒê·∫£ng, Nh√† n∆∞·ªõc v·ªÅ:", options: ["X√¢y d·ª±ng n·ªÅn qu·ªëc ph√≤ng to√†n d√¢n", "ƒê∆∞·ªùng l·ªëi, nhi·ªám v·ª• qu√¢n s·ª±, qu·ªëc ph√≤ng", "X√¢y d·ª±ng l·ª±c l∆∞·ª£ng d√¢n qu√¢n", "Qu·∫£n l√Ω h√†nh ch√≠nh qu√¢n s·ª±"], a: 1 },
        { q: "C√¢u 33. Ch·ª©c nƒÉng c·ªßa B·ªô T·ªïng tham m∆∞u QƒêND Vi·ªát Nam l√†:", options: ["Tham m∆∞u chi·∫øn l∆∞·ª£c v·ªÅ x√¢y d·ª±ng n·ªÅn qu·ªëc ph√≤ng to√†n d√¢n", "Ch·ªâ ƒë·∫°o hu·∫•n luy·ªán ph√°t tri·ªÉn l·ª±c l∆∞·ª£ng", "Qu·∫£n l√Ω qu√¢n s·ª±", "Ch·ªâ ƒë·∫°o c√¥ng t√°c ƒê·∫£ng"], a: 0 },
        { q: "C√¢u 34. Ch·ª©c nƒÉng c·ªßa T·ªïng c·ª•c Ch√≠nh tr·ªã QƒêND Vi·ªát Nam l√†:", options: ["Gi√∫p Qu√¢n u·ª∑ Trung ∆∞∆°ng v·ªÅ c√¥ng t√°c ƒê·∫£ng, c√¥ng t√°c ch√≠nh tr·ªã", "Qu·∫£n l√Ω nh√† n∆∞·ªõc v·ªÅ qu·ªëc ph√≤ng", "Ch·ªâ huy t√°c chi·∫øn", "T·ªï ch·ª©c d√¢n qu√¢n"], a: 0 },
        { q: "C√¢u 35. M·ªôt trong ch·ª©c nƒÉng c·ªßa Qu√¢n khu l√†:", options: ["Tham m∆∞u hu·∫•n luy·ªán l·ª±c l∆∞·ª£ng", "Ch·ªâ ƒë·∫°o H·∫£i qu√¢n", "Tham m∆∞u, ch·ªâ ƒë·∫°o x√¢y d·ª±ng n·ªÅn qu·ªëc ph√≤ng to√†n d√¢n", "Ch·ªâ ƒë·∫°o ph√°o binh"], a: 2 },
        { q: "C√¢u 36. M·ªôt trong ch·ª©c nƒÉng c·ªßa Qu√¢n ƒëo√†n l√†:", options: ["Chi·∫øn ƒë·∫•u v≈© kh√≠ ri√™ng", "T√°c chi·∫øn ƒë·ªôc l·∫≠p ho·∫∑c ƒë·∫£m nhi·ªám h∆∞·ªõng chi·∫øn d·ªãch", "Ch·ªâ ƒë·∫°o binh ch·ªßng TƒÉng", "Qu·∫£n l√Ω qu√¢n d·ª± b·ªã"], a: 1 },
        { q: "C√¢u 37. Qu√¢n hi·ªáu c·ªßa QƒêND Vi·ªát Nam l√† (...) c·ªßa Qu√¢n ƒë·ªôi.", options: ["Bi·ªÉu tr∆∞ng", "Bi·ªÉu t∆∞·ª£ng", "H√¨nh t∆∞·ª£ng", "H√¨nh ·∫£nh"], a: 1 },
        { q: "C√¢u 38. Qu√¢n hi·ªáu c·ªßa QƒêND Vi·ªát Nam h√¨nh tr√≤n, ƒë∆∞·ªùng k√≠nh l·ªõn nh·∫•t l√†:", options: ["36 mm", "38 mm", "40 mm", "42 mm"], a: 0 },
        { q: "C√¢u 39. H·∫° sƒ© quan Qu√¢n ƒë·ªôi nh√¢n d√¢n Vi·ªát Nam c√≥ m·∫•y b·∫≠c?", options: ["Hai b·∫≠c", "B·ªën b·∫≠c", "Ba b·∫≠c: H·∫° sƒ©, Trung sƒ©, Th∆∞·ª£ng sƒ©", "NƒÉm b·∫≠c"], a: 2 },
        { q: "C√¢u 40. Ch·ª©c nƒÉng c·ªßa B·ªô C√¥ng an l√† tham m∆∞u v·ªõi ƒê·∫£ng, Nh√† n∆∞·ªõc v·ªÅ:", options: ["B·∫£o v·ªá c√°c h·ªôi ngh·ªã", "B·∫£o v·ªá an ninh qu·ªëc gia, tr·∫≠t t·ª± an to√†n x√£ h·ªôi", "Qu·∫£n l√Ω tr·∫≠t t·ª±", "Th·ª±c hi·ªán bi·ªán ph√°p v≈© trang"], a: 1 },
        { q: "C√¢u 41. C√¥ng an hi·ªáu c·ªßa C√¥ng an nh√¢n d√¢n Vi·ªát Nam h√¨nh tr√≤n, ƒë∆∞·ªùng k√≠nh:", options: ["34 mm", "35 mm", "36 mm", "37 mm"], a: 2 },
        { q: "C√¢u 42. C√†nh t√πng k√©p bao quanh C√¥ng an hi·ªáu c√≥ k√≠ch th∆∞·ªõc:", options: ["Cao 52 mm, r·ªông 62 mm", "Cao 54 mm, r·ªông 64 mm", "Cao 56 mm, r·ªông 66 mm", "Cao 58 mm, r·ªông 68 mm"], a: 1 },
        { q: "C√¢u 43. Sƒ© quan chuy√™n m√¥n kƒ© thu·∫≠t C√¥ng an nh√¢n d√¢n c·∫•p t√° c√≥ m·∫•y b·∫≠c?", options: ["M·ªôt b·∫≠c", "Ba b·∫≠c: Thi·∫øu t√°, Trung t√°, Th∆∞·ª£ng t√°", "Hai b·∫≠c", "B·ªën b·∫≠c"], a: 1 },
        { q: "C√¢u 44. Ph√π hi·ªáu C√¥ng an nh√¢n d√¢n Vi·ªát Nam l√† (...) quy ƒë·ªãnh ƒë·ªÉ ch·ªâ t·ªï ch·ª©c.", options: ["D·∫•u hi·ªáu", "L√¥-g√¥", "H√¨nh hi·ªáu", "H√¨nh ·∫£nh"], a: 0 },
        { q: "C√¢u 45. Trang ph·ª•c c·ªßa C·∫£nh s√°t giao th√¥ng Vi·ªát Nam c√≥ m√†u:", options: ["Xanh r√™u", "L√∫a ch√≠n v√†ng", "V√†ng", "Xanh lam"], a: 1 },
        { q: "C√¢u 46. Ng·∫Øm b·∫Øn l√† x√°c ƒë·ªãnh g√≥c v√† h∆∞·ªõng b·∫Øn ƒë∆∞a qu·ªπ ƒë·∫°o ƒë·∫°n qua:", options: ["M·ª•c ti√™u", "ƒêi·ªÉm ƒë·ªãnh b·∫Øn tr√∫ng", "M·ª•c ti√™u ƒë·ªãnh tr√∫ng", "ƒêi·ªÉm ƒë·ªãnh b·∫Øn tr√∫ng tr√™n m·ª•c ti√™u"], a: 3 },
        { q: "C√¢u 47. ƒê∆∞·ªùng ng·∫Øm c∆° b·∫£n l√† t·ª´ m·∫Øt qua gi·ªØa khe ng·∫Øm ƒë·∫øn:", options: ["M√©p tr√™n ƒë·∫ßu ng·∫Øm", "ƒêi·ªÉm ch√≠nh gi·ªØa m√©p tr√™n ƒë·∫ßu ng·∫Øm", "M·ª•c ti√™u", "ƒêi·ªÉm gi·ªØa m·ª•c ti√™u"], a: 1 },
        { q: "C√¢u 48. ƒêi·ªÉm x√°c ƒë·ªãnh tr∆∞·ªõc ƒë·ªÉ khi ng·∫Øm v√†o ƒë·∫°n s·∫Ω tr√∫ng m·ª•c ti√™u g·ªçi l√†:", options: ["ƒêi·ªÉm ng·∫Øm ƒë√∫ng", "ƒêi·ªÉm ng·∫Øm ch·ª•m", "ƒêi·ªÉm ng·∫Øm tr√∫ng", "ƒêi·ªÉm ng·∫Øm c∆° b·∫£n"], a: 0 },
        { q: "C√¢u 49. ƒê∆∞·ªùng ng·∫Øm ƒë√∫ng l√† ƒë∆∞·ªùng ng·∫Øm c∆° b·∫£n d√≥ng v√†o ƒëi·ªÉm ng·∫Øm v·ªõi ƒëi·ªÅu ki·ªán:", options: ["M·∫∑t s√∫ng thƒÉng b·∫±ng", "M·∫∑t s√∫ng c·ªë ƒë·ªãnh", "N√≤ng s√∫ng thƒÉng b·∫±ng", "N√≤ng s√∫ng c·ªë ƒë·ªãnh"], a: 0 },
        { q: "C√¢u 50. Khi ng·∫Øm ƒë√∫ng, n·∫øu m·∫∑t s√∫ng nghi√™ng b√™n n√†o th√¨ ƒëi·ªÉm ch·∫°m s·∫Ω:", options: ["L·ªách v√† th·∫•p v·ªÅ b√™n ƒë√≥", "L·ªách v√† cao v·ªÅ b√™n ƒë√≥", "L·ªách v·ªÅ b√™n ƒë√≥", "Cao v·ªÅ b√™n ƒë√≥"], a: 2 },
        { q: "C√¢u 52. ƒê·ªông t√°c n·∫±m b·∫Øn kh√¥ng t√¨ s√∫ng AK g·ªìm:", options: ["Chu·∫©n b·ªã b·∫Øn, b·∫Øn, th√¥i b·∫Øn", "Chu·∫©n b·ªã b·∫Øn, b·∫Øn, ƒë·ª©ng d·∫≠y", "L·∫Øp ƒë·∫°n, b·∫Øn, th√°o ƒë·∫°n", "G∆∞∆°ng s√∫ng, ng·∫Øm, b√≥p c√≤"], a: 0 },
        { q: "C√¢u 53. Kh·∫©u l·ªánh b·∫Øt ƒë·∫ßu n·∫±m b·∫Øn s√∫ng AK l√†:", options: ["N·∫±m b·∫Øn", "N·∫±m chu·∫©n b·ªã b·∫Øn", "Chu·∫©n b·ªã", "Chu·∫©n b·ªã b·∫Øn"], a: 1 },
        { q: "C√¢u 54. Khi nghe d·ª©t kh·∫©u l·ªánh chu·∫©n b·ªã n·∫±m b·∫Øn, ng∆∞·ªùi b·∫Øn th·ª±c hi·ªán:", options: ["2 c·ª≠ ƒë·ªông", "3 c·ª≠ ƒë·ªông", "4 c·ª≠ ƒë·ªông", "5 c·ª≠ ƒë·ªông"], a: 1 },
        { q: "C√¢u 55. ·ªû c·ª≠ ƒë·ªông 1 n·∫±m b·∫Øn, xoay g√≥t b√†n ch√¢n tr√°i h∆∞·ªõng theo:", options: ["G√≥t ch√¢n tr√°i", "G√≥t ch√¢n ph·∫£i", "M≈©i ch√¢n tr√°i", "M≈©i b√†n ch√¢n ph·∫£i"], a: 3 },
        { q: "C√¢u 56. ·ªû c·ª≠ ƒë·ªông 2, h·∫° khu·ª∑u tay tr√°i c√°ch m≈©i b√†n ch√¢n ph·∫£i kho·∫£ng:", options: ["10 cm", "15 cm", "20 cm", "25 cm"], a: 1 },
        { q: "C√¢u 57. Khi l·∫Øp ƒë·∫°n n·∫±m b·∫Øn AK, k·∫πp h·ªôp ti·∫øp ƒë·∫°n v√†o m√° ph·∫£i ·ªëp l√≥t b·∫±ng:", options: ["Ng√≥n √∫t v√† √°p √∫t", "Ng√≥n √°p √∫t v√† ng√≥n gi·ªØa", "Ng√≥n gi·ªØa v√† c√°i", "Ng√≥n tr·ªè v√† c√°i"], a: 1 },
        { q: "C√¢u 58. G∆∞∆°ng s√∫ng n·∫±m b·∫Øn AK ph·∫£i b·∫£o ƒë·∫£m c√°c y·∫øu t·ªë:", options: ["B·∫±ng, ch·∫Øc, ƒë·ªÅu", "Ch·∫Øc, ƒë·ªÅu, b·ªÅn", "B·∫±ng, ch·∫Øc, ƒë·ªÅu, b·ªÅn", "B·∫±ng, ch·∫Øc, ƒë·ªÅu, √™m"], a: 2 },
        { q: "C√¢u 59. ƒê·ªông t√°c ng·∫Øm n·∫±m b·∫Øn AK c·∫ßn √°p m√° ph·∫£i b√°ng s√∫ng v·ªõi l·ª±c:", options: ["V·ª´a ph·∫£i", "Th·∫≠t ch·∫∑t", "Tr√°nh √°p m√°", "G·ªëi m√°"], a: 0 },
        { q: "C√¢u 60. Khi ng·∫Øm b·∫Øn AK ng∆∞·ªùi b·∫Øn c√≥ th·ªÉ:", options: ["Nheo m·ªôt m·∫Øt ho·∫∑c m·ªü c·∫£ hai m·∫Øt", "B·∫Øt bu·ªôc nheo m·∫Øt tr√°i", "B·∫Øt bu·ªôc nheo m·∫Øt ph·∫£i", "B·∫Øt bu·ªôc m·ªü hai m·∫Øt"], a: 0 },
        { q: "C√¢u 23 (Ph·ª•). Khi b√≥p c√≤ s√∫ng AK, d√πng b·ªô ph·∫≠n n√†o c·ªßa ng√≥n tr·ªè?", options: ["Ph·∫ßn cu·ªëi ƒë·ªët th·ª© hai", "Ph·∫ßn gi·ªØa ƒë·ªët th·ª© nh·∫•t", "Ph·∫ßn cu·ªëi ƒë·ªët th·ª© nh·∫•t", "Ph·∫ßn gi·ªØa ƒë·ªët th·ª© hai"], a: 1 },
        { q: "C√¢u 61. Khi b√≥p c√≤ c·∫ßn b·∫£o ƒë·∫£m (...) theo tr·ª•c n√≤ng s√∫ng ƒë·∫øn khi ƒë·∫°n n·ªï.", options: ["√äm, ƒë·ªÅu, t·ª´ t·ª´, th·∫≥ng v·ªÅ sau", "√äm, nhanh", "T·ª´ t·ª´, th·∫≥ng", "Nhanh, m·∫°nh"], a: 0 },
        { q: "C√¢u 62. Ng·∫Øm ch·ª•m x·∫øp lo·∫°i Gi·ªèi n·∫øu ƒë∆∞·ªùng k√≠nh 3 ƒëi·ªÉm ch·∫•m l√†:", options: ["2 mm", "3 mm", "4 mm", "5 mm"], a: 3 },
        { q: "C√¢u 63. Ng·∫Øm ch·ª•m x·∫øp lo·∫°i ƒê·∫°t n·∫øu ƒë∆∞·ªùng k√≠nh 3 ƒëi·ªÉm ch·∫•m l√†:", options: ["7 mm", "8 mm", "9 mm", "10 mm"], a: 3 },
        { q: "C√¢u 64. Khung bia n·ªÅn tr·∫Øng bia s·ªë 4 c√≥ k√≠ch th∆∞·ªõc:", options: ["70 x 70 cm", "75 x 75 cm", "80 x 80 cm", "85 x 85 cm"], a: 1 },
        { q: "C√¢u 65. C·ª± li b·∫Øn bia m·ª•c ti√™u s·ªë 4 l√†:", options: ["150 m", "130 m", "120 m", "100 m"], a: 3 },
        { q: "C√¢u 66. Bia s·ªë 4 lo·∫°i Kh√¥ng ƒë·∫°t n·∫øu 3 ph√°t b·∫Øn d∆∞·ªõi:", options: ["15 ƒëi·ªÉm", "16 ƒëi·ªÉm", "17 ƒëi·ªÉm", "18 ƒëi·ªÉm"], a: 0 }
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let userName = "";
    let breadChoice = null;
    let timer;
    let timeLeft = 45 * 60;

    function setBreadChoice(choice) {
        breadChoice = choice;
        document.getElementById('btn-yes').className = choice ? 'btn-choice active' : 'btn-choice';
        document.getElementById('btn-no').className = !choice ? 'btn-choice active' : 'btn-choice';
    }

    function extractVideoID(url) {
        const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
        const match = url.match(regExp);
        return (match && match[2].length === 11) ? match[2] : null;
    }

    function validateAndStart() {
        userName = document.getElementById('user-name').value.trim();
        const musicUrl = document.getElementById('music-url').value.trim();

        if (!userName) return alert("B√°nh M√¨ Pita c·∫ßn bi·∫øt t√™n b·∫°n!");
        if (breadChoice === null) return alert("B·∫°n ch∆∞a tr·∫£ l·ªùi c√¢u h·ªèi v·ªÅ B√°nh M√¨ Pita k√¨a!");

        // Setup Music
        if (musicUrl) {
            const vidId = extractVideoID(musicUrl);
            if (vidId) {
                document.getElementById('music-container').style.display = 'block';
                document.getElementById('music-container').innerHTML = `<iframe src="https://www.youtube.com/embed/${vidId}?autoplay=1" allow="autoplay"></iframe>`;
            }
        }

        // Shuffle questions
        currentQuestions = [...questionsData].sort(() => Math.random() - 0.5);
        
        document.getElementById('screen-start').classList.remove('active');
        document.getElementById('screen-quiz').classList.add('active');
        document.getElementById('display-user').innerText = "Th√≠ sinh: " + userName;

        startTimer();
        showQuestion();
    }

    function startTimer() {
        timer = setInterval(() => {
            let m = Math.floor(timeLeft / 60);
            let s = timeLeft % 60;
            document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
            if (timeLeft <= 0) { clearInterval(timer); endQuiz(); }
            timeLeft--;
        }, 1000);
    }

    function showQuestion() {
        const item = currentQuestions[currentIndex];
        const quizBox = document.getElementById('quiz-content');
        const nextBtn = document.getElementById('next-btn');
        const resultMsg = document.getElementById('result-msg');

        nextBtn.style.display = 'none';
        resultMsg.innerText = '';
        document.getElementById('progress-fill').style.width = ((currentIndex + 1) / currentQuestions.length * 100) + "%";

        quizBox.innerHTML = `
            <div class="fade-in">
                <div class="question-text">${item.q}</div>
                <div class="options-list">
                    ${item.options.map((opt, i) => `
                        <div class="option" id="opt-${i}" onclick="checkAnswer(${i})">
                            <span style="font-weight:700; margin-right:10px;">${String.fromCharCode(65+i)}.</span> ${opt}
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    }

    function checkAnswer(idx) {
        const item = currentQuestions[currentIndex];
        const allOptions = document.querySelectorAll('.option');
        const resultMsg = document.getElementById('result-msg');

        allOptions.forEach(opt => opt.style.pointerEvents = 'none');

        if (idx === item.a) {
            document.getElementById(`opt-${idx}`).classList.add('correct');
            resultMsg.innerHTML = `<span style="color:#27ae60">Ch√≠nh x√°c! C·ªë l√™n nh√©!</span>`;
            score++;
        } else {
            document.getElementById(`opt-${idx}`).classList.add('incorrect');
            document.getElementById(`opt-${item.a}`).classList.add('correct');
            resultMsg.innerHTML = `<span style="color:#e74c3c">Ti·∫øc qu√°, sai m·∫•t r·ªìi!</span>`;
        }
        document.getElementById('next-btn').style.display = 'block';
    }

    function nextQuestion() {
        currentIndex++;
        if (currentIndex < currentQuestions.length) showQuestion();
        else endQuiz();
    }

    function endQuiz() {
        clearInterval(timer);
        document.getElementById('screen-quiz').classList.remove('active');
        document.getElementById('screen-result').classList.add('active');

        document.getElementById('final-greeting').innerText = `K·∫æT QU·∫¢ C·ª¶A ${userName.toUpperCase()}`;
        document.getElementById('final-score').innerText = `${score}/${currentQuestions.length}`;
        
        const feedback = document.getElementById('bread-feedback');
        if (breadChoice) {
            feedback.innerHTML = "ü•ê C·∫£m ∆°n b·∫°n ƒë√£ th√≠ch B√°nh M√¨ Pita!";
            feedback.style.color = "#27ae60";
        } else {
            feedback.innerHTML = "üò¢ Ng∆∞·ªùi l√†m ƒëang r·∫•t bu·ªìn v√¨ b·∫°n kh√¥ng th√≠ch B√°nh M√¨ Pita...";
            feedback.style.color = "#e74c3c";
        }
    }
</script>

</body>
</html>