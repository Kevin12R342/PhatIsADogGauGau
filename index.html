<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în T·∫≠p - B√°nh M√¨ Pita ·∫©n danh</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* T√¥ng m√†u xanh l√° v√† xanh lam d·ªãu nh·∫π */
            --soft-grad: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --blue-grad: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --pita-green: #27ae60;
            --pita-blue: #2980b9;
            --bg-light: #f0f7f4;
        }

        * { box-sizing: border-box; font-family: 'Quicksand', sans-serif; }
        
        body { 
            background: linear-gradient(120deg, #e0f2f1 0%, #e1f5fe 100%);
            margin: 0; padding: 10px; min-height: 100vh;
            display: flex; justify-content: center; align-items: flex-start;
        }
        
        .app { 
            width: 100%; max-width: 700px; background: rgba(255, 255, 255, 0.98); 
            padding: 25px; border-radius: 25px; 
            box-shadow: 0 10px 30px rgba(41, 128, 185, 0.1); 
            margin-top: 20px;
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        h1 { 
            text-align: center; color: var(--pita-blue); 
            font-size: clamp(1.4rem, 5vw, 2rem); margin: 10px 0;
            letter-spacing: -0.5px;
        }
        .author-tag { text-align: center; font-weight: 700; color: #7f8c8d; margin-bottom: 25px; display: block; font-size: 0.9rem; }

        .form-card { margin-bottom: 15px; }
        label { display: block; font-weight: 700; color: #34495e; margin-bottom: 8px; font-size: 0.95rem; }
        input { 
            width: 100%; padding: 14px; border: 2px solid #d1d8e0; border-radius: 12px; 
            font-size: 1rem; outline: none; transition: 0.3s; background: #fff;
        }
        input:focus { border-color: var(--pita-blue); }

        /* Kh·∫£o s√°t Pita */
        .pita-box { background: #e8f6f3; padding: 18px; border-radius: 20px; text-align: center; border: 2px dashed #27ae60; margin: 20px 0; }
        .row-btn { display: flex; gap: 10px; margin-top: 15px; }
        .choice-btn { 
            flex: 1; padding: 12px; border: 2px solid var(--pita-green); border-radius: 12px; 
            font-weight: 800; cursor: pointer; transition: 0.3s;
            background: white; color: var(--pita-green);
        }
        .choice-btn.active { background: var(--pita-green); color: white; transform: scale(1.02); }

        /* Quiz UI */
        #quiz-box { display: none; }
        .stats { display: flex; justify-content: space-between; font-weight: 700; color: var(--pita-blue); margin-bottom: 10px; }
        .progress-container { height: 8px; background: #eee; border-radius: 10px; margin-bottom: 25px; overflow: hidden; }
        .progress-bar { height: 100%; background: var(--soft-grad); width: 0%; transition: 0.4s; }
        
        .q-text { font-size: 1.15rem; font-weight: 700; margin-bottom: 20px; color: #2c3e50; line-height: 1.5; }
        .opts { display: grid; gap: 10px; }
        .opt { 
            padding: 15px; border: 2px solid #ecf0f1; border-radius: 15px; cursor: pointer; 
            background: #fff; transition: 0.2s; font-weight: 500; min-height: 55px; display: flex; align-items: center;
        }
        .opt:hover { border-color: var(--pita-blue); background: #f7fbff; }
        .correct { background: #d4efdf !important; border-color: #27ae60 !important; color: #145a32; font-weight: 700; }
        .wrong { background: #fadbd8 !important; border-color: #e74c3c !important; color: #78281f; }

        #yt-area { border-radius: 15px; margin-bottom: 20px; display: none; overflow: hidden; height: 80px; }
        .btn-main { 
            width: 100%; padding: 16px; background: var(--blue-grad); color: white; border: none; 
            border-radius: 15px; font-size: 1.1rem; font-weight: 800; cursor: pointer; margin-top: 20px; 
        }
    </style>
</head>
<body>

<div class="app">
    <h1>B√ÅNH M√å PITA ·∫®N DANH</h1>
    <span class="author-tag">H·ªá th·ªëng √¥n t·∫≠p Qu·ªëc ph√≤ng - T√¥ng m√†u d·ªãu m·∫Øt</span>

    <div id="start-box">
        <div class="form-card">
            <label>H·ªç v√† t√™n th√≠ sinh:</label>
            <input type="text" id="name" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n...">
        </div>
        <div class="form-card">
            <label>Link nh·∫°c YouTube (D√°n v√†o ƒë√¢y):</label>
            <input type="text" id="yt" placeholder="https://www.youtube.com/watch?v=...">
        </div>
        <div class="pita-box">
            <b>B·∫°n c√≥ th√≠ch B√°nh M√¨ Pita kh√¥ng?</b>
            <div class="row-btn">
                <button class="choice-btn" id="cy" onclick="setChoice(true)">C√ì!</button>
                <button class="choice-btn" id="cn" onclick="setChoice(false)">KH√îNG</button>
            </div>
        </div>
        <button class="btn-main" onclick="startQuiz()">B·∫Øt ƒë·∫ßu √¥n thi (60 C√¢u)</button>
    </div>

    <div id="quiz-box">
        <div id="yt-area"></div>
        <div class="stats">
            <span id="u-tag"></span>
            <span id="timer">45:00</span>
        </div>
        <div class="progress-container"><div class="progress-bar" id="pb"></div></div>
        <div id="q-area"></div>
        <button class="btn-main" id="next" style="display:none;" onclick="goNext()">C√¢u ti·∫øp theo &rarr;</button>
    </div>

    <div id="res-box" style="display:none; text-align:center;">
        <h2 id="r-head"></h2>
        <div style="font-size: 4rem; color: var(--pita-blue); font-weight: 800; margin: 10px 0;" id="r-grade">0.0</div>
        <p id="r-detail" style="font-size: 1.2rem; font-weight: 700; color: #7f8c8d;"></p>
        <p id="r-pita" style="font-size: 1.1rem; font-weight: 700;"></p>
        <button class="btn-main" onclick="location.reload()">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
    </div>
</div>

<script>
    // To√†n b·ªô d·ªØ li·ªáu 59 c√¢u √¥n t·∫≠p 
    const bank = [
        {q: "T·∫≠p ƒëo√†n P√¥n P·ªët ‚Äì I√™ng Xary ph√°t ƒë·ªông chi·∫øn tranh x√¢m l∆∞·ª£c Vi·ªát Nam v√†o ng√†y", options: ["30-4-1975", "30-4-1978", "30-4-1977", "30-4-1976"], a: 2}, // 1C
        {q: "B·ªô Ch√≠nh tr·ªã v√† Qu√¢n u·ª∑ Trung ∆∞∆°ng ph√°t ƒë·ªông ph·∫£n c√¥ng t·∫≠p ƒëo√†n P√¥n P·ªët v√†o ng√†y", options: ["15-6-1976", "15-6-1977", "15-6-1978", "15-6-1979"], a: 2}, // 2C
        {q: "M·∫∑t tr·∫≠n ƒêo√†n k·∫øt d√¢n t·ªôc c·ª©u n∆∞·ªõc Cam-pu-chia th√†nh l·∫≠p v√†o ng√†y", options: ["02-12-1976", "02-12-1977", "02-12-1978", "02-12-1979"], a: 2}, // 3C
        {q: "P√¥n P·ªët m·ªü cu·ªôc ti·∫øn c√¥ng to√†n tuy·∫øn bi√™n gi·ªõi T√¢y Nam n∆∞·ªõc ta v√†o ng√†y", options: ["23-12-1975", "23-12-1976", "23-12-1977", "23-12-1978"], a: 3}, // 4D
        {q: "Th·ªß ƒë√¥ Phn√¥m P√™nh ho√†n to√†n ƒë∆∞·ª£c gi·∫£i ph√≥ng v√†o ng√†y", options: ["07-01-1976", "07-01-1977", "07-01-1978", "07-01-1979"], a: 3}, // 5D
        {q: "M·ªôt trong n√©t ch√≠nh ngh·ªá thu·∫≠t qu√¢n s·ª± bi√™n gi·ªõi T√¢y Nam l√† ti·∫øn h√†nh chi·∫øn tranh nh√¢n d√¢n t·∫°i ch·ªó", options: ["chi·∫øn tranh nh√¢n d√¢n", "chi·∫øn tranh nh√¢n d√¢n t·∫°i ch·ªó", "chi·∫øn tranh nh√¢n d√¢n t·∫°i ch·ªó r·ªông kh·∫Øp", "chi·∫øn tranh nh√¢n d√¢n t·∫°i ch·ªó ƒë·ªìng lo·∫°t"], a: 2}, // 8C
        {q: "Ch√≠nh quy·ªÅn Trung Qu·ªëc ti·∫øn c√¥ng sang l√£nh th·ªï Vi·ªát Nam v√†o ng√†y", options: ["17-02-1978", "17-3-1978", "17-02-1979", "17-3-1979"], a: 2}, // 10C
        {q: "L·ªánh T·ªïng ƒë·ªông vi√™n b·∫£o v·ªá T·ªï qu·ªëc ƒë∆∞·ª£c c√¥ng b·ªë v√†o ng√†y", options: ["05-01-1979", "05-02-1979", "05-3-1979", "05-4-1979"], a: 2}, // 11C
        {q: "V·ªÅ c∆° b·∫£n, Trung Qu·ªëc ƒë√£ r√∫t qu√¢n kh·ªèi n∆∞·ªõc ta v√†o ng√†y", options: ["15-3-1979", "16-3-1979", "17-3-1979", "18-3-1979"], a: 3}, // 13D
        {q: "Trung Qu·ªëc d√πng v≈© l·ª±c ƒë√°nh chi·∫øm nh√≥m ƒë·∫£o ph√≠a T√¢y qu·∫ßn ƒë·∫£o Ho√†ng Sa v√†o nƒÉm", options: ["1971", "1972", "1973", "1974"], a: 3}, // 17D
        {q: "Trung Qu·ªëc s·ª≠ d·ª•ng v≈© l·ª±c chi·∫øm ƒë√≥ng tr√°i ph√©p b√£i ƒë√° G·∫°c Ma (Tr∆∞·ªùng Sa) v√†o nƒÉm", options: ["1986", "1987", "1988", "1989"], a: 2}, // 18C
        {q: "Hi·ªán nay h·ªá th·ªëng nh√† tr∆∞·ªùng qu√¢n ƒë·ªôi c√≥ bao nhi√™u h·ªçc vi·ªán v√† c√°c tr∆∞·ªùng sƒ© quan, ƒë·∫°i h·ªçc?", options: ["10 h·ªçc vi·ªán - 11 tr∆∞·ªùng", "11 h·ªçc vi·ªán - 10 tr∆∞·ªùng", "9 h·ªçc vi·ªán - 12 tr∆∞·ªùng", "12 h·ªçc vi·ªán - 9 tr∆∞·ªùng"], a: 0}, // 19A
        {q: "Y√™u c·∫ßu tuy·ªÉn sinh Qu√¢n ƒë·ªôi, C√¥ng an l√† t·ªï ch·ª©c tuy·ªÉn sinh ƒë√∫ng quy ch·∫ø, d√¢n ch·ªß, c√¥ng khai,", options: ["minh b·∫°ch, ch√≠nh x√°c, c√¥ng b·∫±ng", "b√≠ m·∫≠t", "nhanh g·ªçn", "n·ªôi b·ªô"], a: 0}, // 20A
        {q: "H·ªçc vi√™n s·∫µn s√†ng nh·∫≠n nhi·ªám v·ª• theo ph√¢n c√¥ng khi ra tr∆∞·ªùng l√†:", options: ["quy·ªÅn l·ª£i", "nguy·ªán v·ªçng", "nghƒ©a v·ª•", "s·ªü th√≠ch"], a: 2}, // 21C
        {q: "Trong c√°c c∆° s·ªü sau, c∆° s·ªü n√†o c·ªßa Qu√¢n ƒë·ªôi KH√îNG tuy·ªÉn h·ªçc sinh THPT?", options: ["H·ªçc vi·ªán H·∫≠u c·∫ßn", "H·ªçc vi·ªán L·ª•c qu√¢n", "H·ªçc vi·ªán Bi√™n ph√≤ng", "H·ªçc vi·ªán Qu√¢n y"], a: 1}, // 22B
        {q: "H·∫° sƒ© quan, binh sƒ© t·∫°i ng≈© d·ª± tuy·ªÉn tr∆∞·ªùng Qu√¢n ƒë·ªôi ph·∫£i ph·ª•c v·ª• ƒë·ªß:", options: ["6 th√°ng", "9 th√°ng", "12 th√°ng tr·ªü l√™n", "15 th√°ng"], a: 2}, // 23C
        {q: "Qu√¢n nh√¢n chuy√™n nghi·ªáp d·ª± tuy·ªÉn tr∆∞·ªùng Qu√¢n ƒë·ªôi ph·∫£i ph·ª•c v·ª• ƒë·ªß:", options: ["6 th√°ng", "12 th√°ng tr·ªü l√™n", "18 th√°ng", "24 th√°ng"], a: 1}, // 24B
        {q: "Thanh ni√™n ngo√†i Qu√¢n ƒë·ªôi d·ª± tuy·ªÉn tr∆∞·ªùng Qu√¢n ƒë·ªôi c√≥ ƒë·ªô tu·ªïi:", options: ["kh√¥ng qu√° 20", "kh√¥ng qu√° 21", "kh√¥ng qu√° 22", "kh√¥ng qu√° 23"], a: 1}, // 25B
        {q: "Qu√¢n nh√¢n t·∫°i ng≈© d·ª± tuy·ªÉn tr∆∞·ªùng Qu√¢n ƒë·ªôi ph·∫£i c√≥ ƒë·ªô tu·ªïi:", options: ["kh√¥ng qu√° 21", "kh√¥ng qu√° 22", "kh√¥ng qu√° 23", "kh√¥ng qu√° 24"], a: 2}, // 26C
        {q: "Ph∆∞∆°ng th·ª©c n√†o KH√îNG √°p d·ª•ng ƒë·ªëi v·ªõi tuy·ªÉn sinh ƒë·∫°i h·ªçc Qu√¢n ƒë·ªôi?", options: ["X√©t tuy·ªÉn th·∫≥ng", "X√©t ƒêGNL tr∆∞·ªùng ƒë·∫°i h·ªçc trong n∆∞·ªõc", "X√©t ƒêGNL tr∆∞·ªùng ƒë·∫°i h·ªçc n∆∞·ªõc ngo√†i", "X√©t ƒêGNL B·ªô Qu·ªëc ph√≤ng"], a: 2}, // 27C
        {q: "Th√≠ sinh d·ª± tuy·ªÉn sinh ƒë√†o t·∫°o ƒë·∫°i h·ªçc trong c√°c tr∆∞·ªùng Qu√¢n ƒë·ªôi", options: ["ƒë·ªÅu ph·∫£i qua s∆° tuy·ªÉn", "mi·ªÖn s∆° tuy·ªÉn n·∫øu h·ªçc gi·ªèi", "mi·ªÖn s∆° tuy·ªÉn n·∫øu ƒë·∫°t gi·∫£i qu·ªëc gia", "t·ª± nguy·ªán"], a: 0}, // 28A
        {q: "Ng√†nh n√†o ƒë∆∞·ª£c ƒë√†o t·∫°o ·ªü H·ªçc vi·ªán An ninh nh√¢n d√¢n?", options: ["An ninh m·∫°ng v√† ph√≤ng ch·ªëng t·ªôi ph·∫°m c√¥ng ngh·ªá cao", "Trinh s√°t kƒ© thu·∫≠t", "Nghi·ªáp v·ª• c·∫£nh s√°t", "Kƒ© thu·∫≠t C√¥ng an"], a: 0}, // 29A
        {q: "ƒê·ªëi t∆∞·ª£ng n√†o KH√îNG tuy·ªÉn m·ªõi ƒë·∫°i h·ªçc ch√≠nh quy tr∆∞·ªùng C√¥ng an?", options: ["Ch·ªâ huy t·ª´ c·∫•p ƒë·ªôi tr·ªü l√™n", "H·ªçc sinh Tr∆∞·ªùng VƒÉn ho√°", "Chi·∫øn sƒ© nghƒ©a v·ª•", "C√¥ng d√¢n th∆∞·ªùng tr√∫"], a: 0}, // 30A
        {q: "Vi·ªác n√†o KH√îNG c√≥ trong n·ªôi dung s∆° tuy·ªÉn v√†o tr∆∞·ªùng C√¥ng an?", options: ["Ki·ªÉm tra h·ªçc b·∫°", "Ki·ªÉm tra s·ª©c kho·∫ª", "Th·∫©m tra ch√≠nh tr·ªã", "Ch·ª•p ·∫£nh b·ªë ƒë·∫ª v√† m·∫π ƒë·∫ª c·ªßa th√≠ sinh"], a: 3}, // 31D
        {q: "Ch·ª©c nƒÉng c·ªßa B·ªô Qu·ªëc ph√≤ng l√† tham m∆∞u v·ªõi ƒê·∫£ng, Nh√† n∆∞·ªõc v·ªÅ:", options: ["h·∫≠u c·∫ßn", "nhi·ªám v·ª• qu√¢n s·ª±, qu·ªëc ph√≤ng b·∫£o v·ªá T·ªï qu·ªëc", "k·ªπ thu·∫≠t s√∫ng", "giao th√¥ng"], a: 1}, // 32B
        {q: "B·ªô T·ªïng tham m∆∞u tham m∆∞u chi·∫øn l∆∞·ª£c v·ªÅ x√¢y d·ª±ng:", options: ["n·ªÅn qu·ªëc ph√≤ng to√†n d√¢n", "d√¢n qu√¢n t·ª± v·ªá", "h·ªá th·ªëng ch√≠nh tr·ªã", "b√≠ m·∫≠t qu√¢n s·ª±"], a: 0}, // 33A
        {q: "T·ªïng c·ª•c ch√≠nh tr·ªã gi√∫p Qu√¢n u·ª∑ Trung ∆∞∆°ng v·ªÅ c√¥ng t√°c ƒê·∫£ng, c√¥ng t√°c ch√≠nh tr·ªã trong", options: ["Qu√¢n ƒë·ªôi", "D√¢n qu√¢n", "H·∫≠u c·∫ßn", "Bi√™n ph√≤ng"], a: 0}, // 34A
        {q: "M·ªôt trong ch·ª©c nƒÉng c·ªßa qu√¢n khu l√† tham m∆∞u, ch·ªâ ƒë·∫°o x√¢y d·ª±ng", options: ["ƒë·∫∑c c√¥ng", "ph√°o binh", "n·ªÅn qu·ªëc ph√≤ng to√†n d√¢n", "h·∫£i qu√¢n"], a: 2}, // 35C
        {q: "M·ªôt trong ch·ª©c nƒÉng c·ªßa qu√¢n ƒëo√†n l√† t√°c chi·∫øn ƒë·ªôc l·∫≠p ho·∫∑c ƒë·∫£m nhi·ªám m·ªôt", options: ["m≈©i t·∫•n c√¥ng", "h∆∞·ªõng chi·∫øn d·ªãch", "v√πng bi·ªÉn", "v√πng tr·ªùi"], a: 1}, // 36B
        {q: "Qu√¢n hi·ªáu c·ªßa QƒêND Vi·ªát Nam l√† (...) c·ªßa Qu√¢n ƒë·ªôi nh√¢n d√¢n Vi·ªát Nam.", options: ["bi·ªÉu tr∆∞ng", "bi·ªÉu t∆∞·ª£ng", "h√¨nh t∆∞·ª£ng", "h√¨nh ·∫£nh"], a: 1}, // 37B
        {q: "Qu√¢n hi·ªáu c·ªßa QƒêND Vi·ªát Nam h√¨nh tr√≤n, ƒë∆∞·ªùng k√≠nh l·ªõn nh·∫•t l√†", options: ["36 mm", "38 mm", "40 mm", "42 mm"], a: 0}, // 38A
        {q: "H·∫° sƒ© quan Qu√¢n ƒë·ªôi nh√¢n d√¢n Vi·ªát Nam c√≥ ba b·∫≠c: H·∫° sƒ©, Trung sƒ©,", options: ["ƒê·∫°i sƒ©", "Chu·∫©n sƒ©", "Th∆∞·ª£ng sƒ©", "Sƒ© quan"], a: 2}, // 39C
        {q: "Ch·ª©c nƒÉng c·ªßa B·ªô C√¥ng an l√† tham m∆∞u b·∫£o v·ªá an ninh qu·ªëc gia, b·∫£o ƒë·∫£m", options: ["tr·∫≠t t·ª± giao th√¥ng", "tr·∫≠t t·ª±, an to√†n x√£ h·ªôi", "b√≠ m·∫≠t nh√† n∆∞·ªõc", "an ninh bi√™n gi·ªõi"], a: 1}, // 40B
        {q: "C√¥ng an hi·ªáu c·ªßa C√¥ng an nh√¢n d√¢n Vi·ªát Nam h√¨nh tr√≤n, ƒë∆∞·ªùng k√≠nh", options: ["34 mm", "35 mm", "36 mm", "37 mm"], a: 2}, // 41C
        {q: "C√†nh t√πng k√©p bao quanh C√¥ng an hi·ªáu c√≥ k√≠ch th∆∞·ªõc", options: ["cao 52, r·ªông 62", "cao 54, r·ªông 64", "cao 56, r·ªông 66", "cao 58, r·ªông 68"], a: 1}, // 42B
        {q: "Sƒ© quan chuy√™n m√¥n kƒ© thu·∫≠t C√¥ng an nh√¢n d√¢n c·∫•p t√° c√≥ ba b·∫≠c: Thi·∫øu t√°, Trung t√°,", options: ["ƒê·∫°i t√°", "Th∆∞·ª£ng t√°", "ƒê·∫°i sƒ©", "Chu·∫©n t√°"], a: 1}, // 43B
        {q: "Ph√π hi·ªáu C√¥ng an nh√¢n d√¢n Vi·ªát Nam l√† (...) quy ƒë·ªãnh ƒë·ªÉ ch·ªâ t·ªï ch·ª©c.", options: ["d·∫•u hi·ªáu", "l√¥-g√¥", "h√¨nh hi·ªáu", "h√¨nh ·∫£nh"], a: 0}, // 44A
        {q: "Qu·∫ßn √°o, m≈© k√™ pi c·ªßa C·∫£nh s√°t giao th√¥ng Vi·ªát Nam c√≥ m√†u", options: ["xanh r√™u", "l√∫a ch√≠n v√†ng", "v√†ng", "xanh lam"], a: 1}, // 45B
        {q: "Ng·∫Øm b·∫Øn l√† x√°c ƒë·ªãnh g√≥c v√† h∆∞·ªõng b·∫Øn ƒë∆∞a qu·ªπ ƒë·∫°o ƒë∆∞·ªùng ƒë·∫°n ƒëi qua", options: ["m·ª•c ti√™u", "b√™n c·∫°nh", "ƒëi·ªÉm ch·∫°m", "ƒëi·ªÉm ƒë·ªãnh b·∫Øn tr√∫ng tr√™n m·ª•c ti√™u"], a: 3}, // 46D
        {q: "ƒê∆∞·ªùng ng·∫Øm c∆° b·∫£n t·ª´ m·∫Øt qua ch√≠nh gi·ªØa m√©p tr√™n khe ng·∫Øm ƒë·∫øn", options: ["ƒë·∫ßu ng·∫Øm", "ƒëi·ªÉm ch√≠nh gi·ªØa m√©p tr√™n ƒë·∫ßu ng·∫Øm", "m·ª•c ti√™u", "trung t√¢m"], a: 1}, // 47B
        {q: "ƒêi·ªÉm x√°c ƒë·ªãnh tr∆∞·ªõc ƒë·ªÉ khi ng·∫Øm v√†o ƒë√≥ ƒë·∫°n s·∫Ω tr√∫ng m·ª•c ti√™u g·ªçi l√†", options: ["ƒëi·ªÉm ng·∫Øm ƒë√∫ng", "ƒëi·ªÉm ng·∫Øm ch·ª•m", "ƒëi·ªÉm ng·∫Øm tr√∫ng", "ƒëi·ªÉm ng·∫Øm c∆° b·∫£n"], a: 0}, // 48A
        {q: "ƒê∆∞·ªùng ng·∫Øm ƒë√∫ng l√† ƒë∆∞·ªùng ng·∫Øm c∆° b·∫£n d√≥ng v√†o ƒëi·ªÉm ng·∫Øm v·ªõi ƒëi·ªÅu ki·ªán", options: ["m·∫∑t s√∫ng thƒÉng b·∫±ng", "n√≤ng th·∫≥ng", "m·∫Øt tinh", "tay ch·∫Øc"], a: 0}, // 49A
        {q: "Khi ng·∫Øm ƒë√∫ng, m·∫∑t s√∫ng nghi√™ng b√™n ph·∫£i th√¨ ƒëi·ªÉm ch·∫°m s·∫Ω", options: ["cao ph·∫£i", "l·ªách tr√°i", "th·∫•p v√† l·ªách ph·∫£i", "cao tr√°i"], a: 2}, // 50C
        {q: "ƒê·ªông t√°c n·∫±m b·∫Øn s√∫ng AK g·ªìm chu·∫©n b·ªã b·∫Øn, b·∫Øn v√†", options: ["th√¥i b·∫Øn", "ƒë·ª©ng d·∫≠y", "th√°o ƒë·∫°n", "l·∫Øp ƒë·∫°n"], a: 0}, // 52A
        {q: "Kh·∫©u l·ªánh th·ª±c hi·ªán ƒë·ªông t√°c n·∫±m b·∫Øn s√∫ng ti·ªÉu li√™n AK l√†", options: ["N·∫±m b·∫Øn", "N·∫±m chu·∫©n b·ªã b·∫Øn", "Chu·∫©n b·ªã", "B·∫Øn"], a: 1}, // 53B
        {q: "Nghe d·ª©t kh·∫©u l·ªánh chu·∫©n b·ªã n·∫±m b·∫Øn, ng∆∞·ªùi b·∫Øn th·ª±c hi·ªán bao nhi√™u c·ª≠ ƒë·ªông?", options: ["2", "3", "4", "5"], a: 1}, // 54B
        {q: "·ªû c·ª≠ ƒë·ªông 1 n·∫±m b·∫Øn, xoay g√≥t b√†n ch√¢n tr√°i h∆∞·ªõng theo", options: ["g√≥t ph·∫£i", "m≈©i tr√°i", "m≈©i tr√°i", "m≈©i b√†n ch√¢n ph·∫£i"], a: 3}, // 55D
        {q: "Khu·ª∑u tay tr√°i h·∫° xu·ªëng c√°ch h∆∞·ªõng b√†n ch√¢n ph·∫£i kho·∫£ng", options: ["10 cm", "15 cm", "20 cm", "25 cm"], a: 1}, // 56B
        {q: "L·∫Øp ƒë·∫°n n·∫±m b·∫Øn, k·∫πp h·ªôp ti·∫øp ƒë·∫°n v√†o m√° ph·∫£i ·ªëp l√≥t tay b·∫±ng", options: ["ng√≥n c√°i", "ng√≥n √°p √∫t v√† ng√≥n gi·ªØa", "ng√≥n √∫t", "ng√≥n tr·ªè"], a: 1}, // 57B
        {q: "G∆∞∆°ng s√∫ng n·∫±m b·∫Øn AK ph·∫£i b·∫£o ƒë·∫£m b·∫±ng, ch·∫Øc, ƒë·ªÅu,", options: ["b·ªÅn", "√™m", "m·∫°nh", "nhanh"], a: 2}, // 58C (t∆∞∆°ng ·ª©ng ƒë√°p √°n C trong file)
        {q: "√Åp m√° ph·∫£i v√†o b√°ng s√∫ng AK v·ªõi l·ª±c", options: ["v·ª´a ph·∫£i", "th·∫≠t ch·∫∑t", "nh·∫π nh√†ng", "m·∫°nh"], a: 0}, // 59A
        {q: "Khi th·ª±c hi·ªán ƒë·ªông t√°c ng·∫Øm b·∫Øn AK, ng∆∞·ªùi b·∫Øn c√≥ th·ªÉ", options: ["nheo m·ªôt m·∫Øt ho·∫∑c m·ªü c·∫£ hai", "nh·∫Øm c·∫£ hai", "nh√¨n th·∫≥ng", "nh√¨n nghi√™ng"], a: 0}, // 60A
        {q: "Khi b√≥p c√≤ s√∫ng AK, d√πng b·ªô ph·∫≠n n√†o c·ªßa ng√≥n tr·ªè tay ph·∫£i?", options: ["ph·∫ßn cu·ªëi ƒë·ªët th·ª© hai", "ph·∫ßn gi·ªØa ƒë·ªët th·ª© nh·∫•t", "ph·∫ßn cu·ªëi ƒë·ªët th·ª© nh·∫•t", "ng√≥n c√°i"], a: 1}, // 23B (c√¢u b·ªï sung)
        {q: "Khi b√≥p c√≤ c·∫ßn b·∫£o ƒë·∫£m √™m, ƒë·ªÅu, t·ª´ t·ª´, th·∫≥ng v·ªÅ sau theo tr·ª•c", options: ["n√≤ng s√∫ng", "th√¢n ng∆∞·ªùi", "ƒë∆∞·ªùng ƒë·∫°n", "bia"], a: 0}, // 61A
        {q: "K·∫øt qu·∫£ ng·∫Øm ch·ª•m x·∫øp lo·∫°i Gi·ªèi n·∫øu ƒë∆∞·ªùng k√≠nh 3 ƒëi·ªÉm ch·∫•m l√†", options: ["2 mm", "3 mm", "4 mm", "5 mm"], a: 3}, // 62D
        {q: "K·∫øt qu·∫£ ng·∫Øm ch·ª•m x·∫øp lo·∫°i ƒê·∫°t n·∫øu ƒë∆∞·ªùng k√≠nh 3 ƒëi·ªÉm ch·∫•m l√†", options: ["7 mm", "8 mm", "9 mm", "10 mm"], a: 3}, // 63D
        {q: "Khung bia n·ªÅn tr·∫Øng bia s·ªë 4 c√≥ k√≠ch th∆∞·ªõc l√†", options: ["70x70", "75x75", "80x80", "85x85"], a: 1}, // 64B
        {q: "C·ª± li b·∫Øn bia m·ª•c ti√™u s·ªë 4 l√† bao nhi√™u?", options: ["150 m", "130 m", "120 m", "100 m"], a: 3}, // 65D
        {q: "X·∫øp lo·∫°i Kh√¥ng ƒë·∫°t bia s·ªë 4 n·∫øu t·ªïng 3 ph√°t b·∫Øn d∆∞·ªõi", options: ["15 ƒëi·ªÉm", "16 ƒëi·ªÉm", "17 ƒëi·ªÉm", "18 ƒëi·ªÉm"], a: 0}, // 66A
        {q: "C√ÇU 60: T√°c GI·∫¢ c·ªßa Web n√†y l√† ng∆∞·ªùi th√≠ch b√°nh m√¨ Pita ƒë√∫ng hay sai?", options: ["ƒê√∫ng", "Sai"], a: 0}
    ];

    let qs = [], cur = 0, score = 0, user = "", pitaStatus = null, left = 45*60, timer;
    const G_SCRIPT = "D√ÅN_LINK_WEB_APP_URL_M·ªöI_C·ª¶A_B·∫†N_V√ÄO_ƒê√ÇY";

    function setChoice(c) {
        pitaStatus = c;
        document.getElementById('cy').className = c ? 'choice-btn active' : 'choice-btn';
        document.getElementById('cn').className = !c ? 'choice-btn active' : 'choice-btn';
    }

    function extractYTID(url) {
        let id = '';
        url = url.replace(/(>|<)/gi,'').split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);
        if(url[2] !== undefined) { id = url[2].split(/[^0-9a-z_\-]/i)[0]; } else { id = url; }
        return id;
    }

    function startQuiz() {
        user = document.getElementById('name').value.trim();
        if(!user || pitaStatus === null) return alert("Vui l√≤ng nh·∫≠p t√™n v√† ch·ªçn ƒë√°p √°n v·ªÅ B√°nh M√¨ Pita nh√©!");
        
        let url = document.getElementById('yt').value.trim();
        if(url) {
            let vid = extractYTID(url);
            if(vid) {
                document.getElementById('yt-area').style.display = 'block';
                document.getElementById('yt-area').innerHTML = `<iframe width="100%" height="80" src="https://www.youtube.com/embed/${vid}?autoplay=1" frameborder="0" allow="autoplay"></iframe>`;
            }
        }
        
        // X√°o tr·ªôn 59 c√¢u, gi·ªØ c√¢u 60 cu·ªëi c√πng
        let first59 = bank.slice(0, 59).sort(() => Math.random() - 0.5);
        qs = [...first59, bank[59]];
        
        document.getElementById('start-box').style.display = 'none';
        document.getElementById('quiz-box').style.display = 'block';
        document.getElementById('u-tag').innerText = "Th√≠ sinh: " + user;
        
        timer = setInterval(() => {
            let m = Math.floor(left/60), s = left%60;
            document.getElementById('timer').innerText = `${m}:${s<10?'0'+s:s}`;
            if(left-- <= 0) endQuiz();
        }, 1000);
        showQ();
    }

    function showQ() {
        let item = qs[cur];
        document.getElementById('pb').style.width = ((cur+1)/qs.length*100) + "%";
        document.getElementById('next').style.display = 'none';
        document.getElementById('q-area').innerHTML = `<div class="q-text">${cur+1}. ${item.q}</div><div class="opts">${item.options.map((o, i) => `<div class="opt" onclick="checkAnswer(${i}, this)">${String.fromCharCode(65+i)}. ${o}</div>`).join('')}</div>`;
    }

    function checkAnswer(i, el) {
        let item = qs[cur];
        document.querySelectorAll('.opt').forEach(o => o.style.pointerEvents = 'none');
        if(i === item.a) { el.classList.add('correct'); score++; }
        else { el.classList.add('wrong'); document.querySelectorAll('.opt')[item.a].classList.add('correct'); }
        document.getElementById('next').style.display = 'block';
    }

    function goNext() { if(++cur < qs.length) showQ(); else endQuiz(); }

    function endQuiz() {
        clearInterval(timer);
        document.getElementById('quiz-box').style.display = 'none';
        document.getElementById('res-box').style.display = 'block';
        document.getElementById('r-head').innerText = "K·∫æT QU·∫¢ C·ª¶A " + user.toUpperCase();
        
        let finalGrade = (score / qs.length) * 10;
        document.getElementById('r-grade').innerText = finalGrade.toFixed(1);
        document.getElementById('r-detail').innerText = `B·∫°n ƒë√£ ƒë√∫ng ${score}/${qs.length} c√¢u √¥n t·∫≠p.`;
        
        let resPita = document.getElementById('r-pita');
        if(pitaStatus) { resPita.innerText = "üçÉ C·∫£m ∆°n b·∫°n r·∫•t nhi·ªÅu v√¨ ƒë√£ th√≠ch B√°nh M√¨ Pita!"; resPita.style.color = "#27ae60"; }
        else { resPita.innerText = "üíß Ng∆∞·ªùi l√†m ƒëang c·∫£m th·∫•y r·∫•t bu·ªìn..."; resPita.style.color = "#2980b9"; }

        if(G_SCRIPT !== "https://script.google.com/macros/s/AKfycbx30MaWxZTRg8rHkVq-D5WMghsXQ6Qq5q4S-77FfkjMwyFOiXvsN13hXd4AFooMeFR1kA/exec") {
            fetch(G_SCRIPT, { method: "POST", mode: "no-cors", body: JSON.stringify({ name: user, grade: finalGrade.toFixed(1), score: `${score}/${qs.length}`, pita: pitaStatus ? "C√≥" : "Kh√¥ng" }) });
        }
    }
</script>
</body>
</html>

